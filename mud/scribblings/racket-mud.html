<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>Racket-MUD</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="file:///home/emsenn/dev/racket-mud/mud/scribblings/racket-mud.html" class="tocviewselflink" data-pltdoc="x">Racket-<wbr></wbr>MUD</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="file:///home/emsenn/dev/racket-mud/mud/scribblings/racket-mud.html#%28part._.The_.Engine%29" class="tocviewlink" data-pltdoc="x">The Engine</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="file:///home/emsenn/dev/racket-mud/mud/scribblings/racket-mud.html#%28part._.Services%29" class="tocviewlink" data-pltdoc="x">Services</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="file:///home/emsenn/dev/racket-mud/mud/scribblings/racket-mud.html#%28part._.Events%29" class="tocviewlink" data-pltdoc="x">Events</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="file:///home/emsenn/dev/racket-mud/mud/scribblings/racket-mud.html#%28part._.Libraries%29" class="tocviewlink" data-pltdoc="x">Libraries</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Racket-.M.U.D%29" class="tocsubseclink" data-pltdoc="x">Racket-<wbr></wbr>MUD</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.The_.Engine%29" class="tocsubseclink" data-pltdoc="x">The Engine</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Services_and_the_.Tick%29" class="tocsubseclink" data-pltdoc="x">Services and the Tick</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._.Events%29" class="tocsubseclink" data-pltdoc="x">Events</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Services%29" class="tocsubseclink" data-pltdoc="x">Services</a></td></tr><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._.M.U.D.Socket_.Service%29" class="tocsubseclink" data-pltdoc="x">MUDSocket Service</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._.Client_.Service%29" class="tocsubseclink" data-pltdoc="x">Client Service</a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._.Web_.Service%29" class="tocsubseclink" data-pltdoc="x">Web Service</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Events%29" class="tocsubseclink" data-pltdoc="x">Events</a></td></tr><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._.Test_.Event%29" class="tocsubseclink" data-pltdoc="x">Test Event</a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._.Send_.Client_.Message_.Event%29" class="tocsubseclink" data-pltdoc="x">Send Client Message Event</a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Libraries%29" class="tocsubseclink" data-pltdoc="x">Libraries</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">6.7</span></div><h2><a name="(part._.Racket-.M.U.D)"></a>Racket-MUD</h2><p><span style="font-style: italic"><span style="font-weight: bold">NOTE:</span> A lot of the documentation right now talks about things that will be a part of Racket-MUD version 0.1.0 as though they exist. I didn&rsquo;t wanna have to go back and rewrite a bunch of "will" to "is".</span></p><p>Racket-MUD is a Racket package containing a <span style="font-style: italic">MUD engine</span> written by emsenn and released for the benefit of the commons. It is currently in earliest alpha.</p><p><span style="font-style: italic">MUDs</span>, or <span style="font-style: italic">multi-user dimensions</span>, are a class of server where clients traditionally receive text output and interact by typing commands. MUDs are usually games, and are often role-playing games.</p><p>Racket-MUD is the engine, or driver, for running a MUD server, and is intended to be used with one or more <span style="font-style: italic">MUD libraries</span>: modules for adding game features.</p><p>This documentation will contain information about the project, a list of Racket-MUD libraries, as well as several manuals for learning to work with the codebase:</p><ul><li><p>Server Administration</p></li><li><p>Racket-MUD Library Development</p></li><li><p>Racket-MUD Development</p></li></ul><p>It also contains the package documentation, which explains the codebase in-depth.</p><p>Finally, the following resources will be included:</p><ul><li><p>Changelog</p></li><li><p>Plans</p></li><li><p>Dictionary</p></li><li><p>Index</p></li></ul><p>By providing a limited set of features and focusing on documentation, Racket-MUD aims to be the non-programmer&#8217;s way to create and run a MUD.</p><h3>1<tt>&nbsp;</tt><a name="(part._.The_.Engine)"></a>The Engine</h3><p>The Racket-MUD engine is the core set of functions that handle the basic operations of the MUD as a server. Its main responsibility is the maintenance of two data structures: the currently created <span style="font-style: italic">Things</span>, and scheduled <span style="font-style: italic">Events</span>. The engine conducts this maintenance by <span class="stt">tick</span>ing: calling a procedure to perform the maintenance over-and-over until the engine is <span class="stt">stop</span>ped.</p><h4>1.1<tt>&nbsp;</tt><a name="(part._.Services_and_the_.Tick)"></a>Services and the Tick</h4><p>I think the simplest way to explain the functions of the engine is to look at what happens when it is <span class="stt">load</span>ed, <span class="stt">start</span>ed, <span class="stt">run</span>, and <span class="stt">stop</span>ped.</p><p>The engine&rsquo;s <span class="stt">load</span> procedure looks through a list of known services. and calls each of those services&rsquo; <span class="stt">load</span> procedures (if the service has one.) Each service handles a chunk of the engine&rsquo;s functioning, like running a server or handling client accounts. As they do different things, each service&rsquo;s <span class="stt">load</span> procedure does something different, based on the service: the MUDSocket and Web services bind themselves to their appropriate ports, while the Client service checks to see if there&rsquo;s a record of clients and if not, makes a new one. Additionally, every service that has a <span class="stt">tick</span> function is added to a list of <span style="font-style: italic">tickable functions</span>.</p><p>The engine&rsquo;s <span class="stt">start</span> procedure works in a similar way to <span class="stt">load</span>: it goes through the list of known services and, if they have a <span class="stt">start</span> procedure of their own, it gets called.</p><p>The <span class="stt">run</span> procedure calls the <span class="stt">tick</span> procedure until it is told to stop, at which point it calls the <span class="stt">stop</span> procedure.</p><p>The <span class="stt">tick</span> procedure calls the <span class="stt">tock</span> procedure, and then the <span class="stt">tick</span> procedure again, which means that it just keeps calling <span class="stt">tick</span> then <span class="stt">tock</span> then <span class="stt">tick</span> again - until told to stop.</p><p>The main part of the <span style="font-style: italic">tick</span> then comes from the <span class="stt">tock</span> procedure, which calls the <span class="stt">tick</span> procedure of every <span style="font-style: italic">tickable service</span>, and calls every <span style="font-style: italic">scheduled event</span>. (More on events soon.)</p><p>Each service&rsquo;s <span class="stt">tick</span> procedure, like their <span class="stt">load</span> and <span class="stt">start</span> procedures, is different. The MUDSocket service&rsquo;s <span class="stt">tick</span> procedure accepts new connections, reads info from existing connections, and sends out messages queued in their buffer, for example.</p><h4>1.2<tt>&nbsp;</tt><a name="(part._.Events)"></a>Events</h4><p><span style="font-style: italic">Events</span> are procedures which are <span style="font-style: italic">scheduled</span>, usually by another event or a service&rsquo;s <span class="stt">tick</span> procedure, and then called the next <span class="stt">tick</span>. For example, on Tick 0, Client Alpha, connected trhough the MUDSocket server types "help" and hits enter.</p><p>on Tick 1, the MUDSocket service&rsquo;s <span class="stt">tick</span> procedure looks through the connected clients for any that have submited messages, and for Client Alpha, reads in the line "<span class="stt">help</span>". The MUDSocket service <span style="font-style: italic">schedules</span> a <span class="stt">mudparse</span> event. Each <span style="font-style: italic">event</span> has a <span style="font-style: italic">payload</span>, which is a set of keys and values that help inform the event&rsquo;s operation. The <span class="stt">mudparse</span> event expects two pieces of information: a <span class="stt">client</span> (Alpha) and <span class="stt">message</span> ("help").</p><p>On Tick 2, the engine&rsquo;s main <span class="stt">tick</span> reads the <span class="stt">mudparse</span> event in the list of <span style="font-style: italic">scheduled events</span>, and calls the assocated procedure with the payload as arguments. The <span class="stt">mudparse</span> procedure does its work, ultimately deciding that Client Alpha entered the "help" command without arguments. The <span class="stt">mudparse</span> procedure then schedules a <span class="stt">help</span> event.</p><p>On Tick 3, the <span class="stt">help</span> procedure, triggered by the <span style="font-style: italic">scheduled event</span>, generates a help message for Client Alpha and <span style="font-style: italic">schedules</span> a <span class="stt">send</span> event containing the message.</p><p>On Tick 4, the <span class="stt">send</span> procedure sends the message to Client Alpha 1.</p><ul><li><p>0: Client submits "help"</p></li><li><p>1: MUDSocket service reads in command and schedules...</p></li><li><p>2: MUDParse interprets the command and schedules...</p></li><li><p>3: Help generates a response and schedules...</p></li><li><p>4: Sending it to the client.</p></li></ul><h3>2<tt>&nbsp;</tt><a name="(part._.Services)"></a>Services</h3><p>The MUD engine relies on a variety of services to actually do anything.</p><h4>2.1<tt>&nbsp;</tt><a name="(part._.M.U.D.Socket_.Service)"></a>MUDSocket Service</h4><h4>2.2<tt>&nbsp;</tt><a name="(part._.Client_.Service)"></a>Client Service</h4><h4>2.3<tt>&nbsp;</tt><a name="(part._.Web_.Service)"></a>Web Service</h4><h3>3<tt>&nbsp;</tt><a name="(part._.Events)"></a>Events</h3><p>Events are, well, events. Iunno I&rsquo;ll write this once I&rsquo;ve got other docs done.</p><h4>3.1<tt>&nbsp;</tt><a name="(part._.Test_.Event)"></a>Test Event</h4><p>This event simply echoes its payload into the console.</p><h4>3.2<tt>&nbsp;</tt><a name="(part._.Send_.Client_.Message_.Event)"></a>Send Client Message Event</h4><p>This event sends a message to a client.</p><h3>4<tt>&nbsp;</tt><a name="(part._.Libraries)"></a>Libraries</h3><p>At the moment there are no libraries for Racket-MUD, but I have plans for two:</p><ul><li><p>Fyreside is a chatroom card game.</p></li><li><p>Okaga is a role-playing game.</p></li></ul></div></div><div id="contextindicator">&nbsp;</div></body></html>